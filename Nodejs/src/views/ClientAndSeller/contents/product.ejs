<div class="container my-2 overflow-auto">
  <div class="row container-fluid">
    <div class="row container-fluid">
      <div class="col-lg-6">
        <div class="row justify-content-center container-fluid">
          <div id="suggests22" class="container-fluid carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="<%-data.productData[0].image1%>" style="width: 100%; height: 300px;" alt="First slide">
              </div>
              <div class=" carousel-item">
                <img class="d-block w-100" src="<%-data.productData[0].image2%>" style="width: 100%; height: 300px;" alt="Second slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="<%-data.productData[0].image3%>" style="width: 100%; height: 300px;" alt="Third slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#suggests22" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#suggests22" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        </div>
        <div class="row container-fluid">
          <div data-target="#suggests22" class="col-4" data-slide-to="0" class="active">
            <img class="d-block w-100 border-dark" src="<%-data.productData[0].image1%>" style="width: 100%; height: 100px;" alt="Third slide">
          </div>
          <div data-target="#suggests22" class="col-4 border-dark" data-slide-to="1">
            <img class="d-block w-100" src="<%-data.productData[0].image2%>" style="width: 100%; height: 100px;" alt="Third slide">
          </div>
          <div data-target="#suggests22" class="col-4 border-dark" data-slide-to="2">
            <img class="d-block w-100" src="<%-data.productData[0].image3%>" style="width: 100%; height: 100px;" alt="Third slide">
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <h2 class="row mt-5"><%-data.productData[0].name%></h2>
        <ul>
          <li>
            <h5>Loại:<%-data.productData[0].type%></h5>
          </li>
          <li>
            <h5>Giá:<%-data.productData[0].price%></h5>
          </li>
          <li>
            <h5>Còn tồn:<%-data.productData[0].quantity%></h5>
          </li>
        </ul>
        <h5>Mô tả</h5>
        <p class="text-justify"><%-data.productData[0].description%></p>
        <div class="row">
          <% if (session.authenticated) {%>
          <% if (session.user.permission == "seller" && session.user.userID == data.productData[0].sellerid) {%>
          <button class="btn-danger bg-success mx-auto" data-toggle="modal" data-target="#myModal">Xoá mặt hàng</button>
          <button class="btn-danger bg-success mx-auto" data-toggle="modal" data-target="#yourModal">Thêm mặt hàng</button>
          <% } else if (session.user.userID != data.productData[0].sellerid) { %>
          <button class="btn-danger bg-success mx-auto" data-toggle="modal" data-target="#mModal">Mua</button>
          <button class="btn-danger bg-success mx-auto" data-toggle="modal" data-target="#yModal">Thêm vào giỏ</button>
          <% } %>
          <% } else {%>
          <h3>Vui lòng đăng nhập trước khi mua!</h3>
          <%}%>
        </div>
      </div>
      <% if (session.authenticated) {%>
          <div class="modal" id="mModal">
            <div class="modal-dialog">
              <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                  <h4 class="modal-title">Mua mặt hàng</h4>
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                  <form class="container-fluid" id="buyForm" action="<%baseURL%>/buyProduct" method="post" class="bg-light m-3 p-1">
                    <input type="hidden" name="productid" value="<%-data.productData[0].id %>">
                    <input type="hidden" name="type" value="<%-data.productData[0].type %>">
                    <input type="hidden" name="buyerid" value="<%-data.customerData[0].id %>">
                    <!-- <input type="hidden" name="producttype" value=""> -->
                    <div class="mb-3 mt-3">
                      <label for="productname" class="form-label">Mặt hàng:</label>
                      <input type="text" class="form-control" id="productname" name="productname" value="<%-data.productData[0].name %>" disabled>
                    </div>
                    <div class="mb-3 mt-3">
                      <label for="quantity" class="form-label">Số lượng:</label>
                      <input type="number" class="form-control" id="quantity" name="quantity" min="0" max="" step="0.01">
                    </div>
                    <div class="mb-3 mt-3">
                      <label for="price" class="form-label">Đơn giá:</label>
                      <input type="number" class="form-control" id="price" name="price" value="<%-data.productData[0].price %>" disabled>
                    </div>
                    <div class="mb-3 mt-3">
                      <label for="price" class="form-label">Tổng giá:</label>
                      <input type="number" class="form-control" id="overallprice" name="overallprice" value="" disabled>
                    </div>
                    <script>
                      document.getElementById("quantity").addEventListener("change", function() {
                        let quantity = parseFloat(document.getElementById("quantity").value);
                        let price = parseFloat(document.getElementById("price").value);
                        let overall = quantity * price;
                        console.log(quantity);
                        console.log(price);
                        console.log(overall);
                        document.getElementById("overallprice").value = String(overall);
                      });
                    </script>
                    <div class="mb-3 mt-3">
                      <button class="m-auto btn btn-primary">Mua</button>
                    </div>


                  </form>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

              </div>
            </div>
          </div>
          <div class="modal" id="yModal">
            <div class="modal-dialog">
              <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                  <h4 class="modal-title">Thêm vào giỏ hàng</h4>
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                  <form class="container-fluid" id="addCartForm" action="<%baseURL%>/addIntoCart" method="post" class="bg-light m-3 p-1">
                    <input type="hidden" name="productid" value="<%-data.productData[0].id %>">
                    <input type="hidden" name="type" value="<%-data.productData[0].type %>">
                    <input type="hidden" name="buyerid" value="<%-data.customerData[0].id %>">
                    <!-- <input type="hidden" name="producttype" value=""> -->
                    <div class="mb-3 mt-3">
                      <label for="productname" class="form-label">Mặt hàng:</label>
                      <input type="text" class="form-control" id="productname2" name="productname" value="<%-data.productData[0].name %>" disabled>
                    </div>
                    <div class="mb-3 mt-3">
                      <label for="quantity" class="form-label">Số lượng:</label>
                      <input type="number" class="form-control" id="quantity2" name="quantity" min="0" max="" step="0.01">
                    </div>
                    <div class="mb-3 mt-3">
                      <label for="price" class="form-label">Đơn giá:</label>
                      <input type="number" class="form-control" id="price2" name="price" value="<%-data.productData[0].price %>" disabled>
                    </div>
                    <div class="mb-3 mt-3">
                      <label for="price" class="form-label">Tổng giá:</label>
                      <input type="number" class="form-control" id="overallprice2" name="overallprice" value="" disabled>
                    </div>
                    <script>
                      document.getElementById("quantity2").addEventListener("change", function() {
                        let quantity = parseFloat(document.getElementById("quantity2").value);
                        let price = parseFloat(document.getElementById("price2").value);
                        let overall = quantity * price;
                        console.log(quantity);
                        console.log(price);
                        console.log(overall);
                        document.getElementById("overallprice2").value = String(overall);
                      });
                    </script>
                    <div class="mb-3 mt-3">
                      <button class="m-auto btn btn-primary">Mua</button>
                    </div>


                  </form>
                </div>


                <!-- Modal footer -->
                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

              </div>
            </div>
          </div>
          <%}%>
    </div>
    <% if (session.user!=null) {%>
          <% if (session.user.permission == "seller") {%>
          <div class="modal" id="myModal">
            <div class="modal-dialog">
              <div class="modal-content">


                <div class="modal-header">
                  <h4 class="modal-title">Xoá mặt hàng</h4>
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>


                <div class="modal-body">
                  <p>Bạn có chắc chắn muốn xoá không?</p>
                  <form class="container-fluid" id="deleteform" action="<%-baseURL%>/seller/deleteproduct" method="post" class="bg-light m-3 p-1">
                    <div class="row mb-3">
                      <input type="hidden" name="productId" value=<%-data.productData[0].id %>d>
                      <button type="submit" class="btn btn-danger ml-auto mt-2">Submit</button>
                    </div>
                  </form>
                </div>

              </div>
            </div>
          </div>
          <div class="modal" id="yourModal">
            <div class="modal-dialog">
              <div class="modal-content">


                <div class="modal-header">
                  <h4 class="modal-title">Thêm mặt hàng</h4>
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>


                <div class="modal-body">
                  <form class="container-fluid" id="addform" action="../addproduct" method="post" class="bg-light m-3 p-1">
                    <div class="row mb-3">
                      <input type="hidden" name="productId" value=<%-data.productData[0].id %>>
                      <label for="content" class="form-label">Số lượng:</label>
                      <input type="text" name="quantity" class="form-control" placeholder="Thêm số lượng">
                      <button type="submit" class="btn btn-danger ml-auto mt-2">Submit</button>
                    </div>
                </div>
                </form>



              </div>
            </div>
          </div>
          <%}%>
    <%}%>
        </div>
        <div class="row">
          <h2>Bình luận</h2>
          <a href="#" class="ml-auto">Xem thêm</a>
        </div>
        <div class="container-fluid" style="height: 270px; overflow-y: scroll;">
          <% for (let i = 0; i<data.commentData.length; i++) {%>
          <div class="row mt-3 border border-primary rounded">
            <div class="col-1 card">
              <img class="d-block w-100" src="<%- data.commentData[i].avatar%>" alt="abc">
            </div>
            <div class="col-11">
              <h6><%- data.commentData[i].username%></h6>
              <p><%- data.commentData[i].content%></p>
            </div>
          </div>
          <%}%>
  </div>
  <% if (session.user!=null) {%>
          <% if (session.user!=null) {%>
          <form id="cmt" action="<%baseURL%>/submitProductComment" method="post" class=" m-3 p-1">
            <%} else {%>
            <form id="cmt" action="<%baseURL%>/seller/submitProductComment" method="post" class=" m-3 p-1">
              <%}%>
            <div class="row mb-3">
              <input type="hidden" name="productId" value="<%-data.productData[0].id %>">
              <input type="hidden" name="customerId" value='<%-session.user.userID %>'>
              <label for="content" class="form-label">Bình luận:</label>
              <textarea name="content" id="content" rows="3" class="form-control" placeholder="Bình luận..."></textarea>
        </div>
        <div class="row mb-3">
          <button type="submit" class="ml-auto btn btn-primary">Submit</button>
        </div>
        </form>
        <%} else {%>
        <h3>Vui lòng đăng nhập trước khi bình luận!</h3>
        <%}%>
</div>
</div>
</div>